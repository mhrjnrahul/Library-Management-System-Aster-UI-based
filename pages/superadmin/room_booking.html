<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Management System - Room Booking</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">
    
    <style>
        body {
            background-color: #f4f6f9;
        }

        /* Sidebar */
        .sidebar {
            width: 240px;
            min-height: 100vh;
            background: #1e293b;
            color: white;
            position: fixed;
            left: 0;
            top: 0;
            padding: 20px 10px;
        }

        .sidebar a {
            color: #e2e8f0;
            text-decoration: none;
            padding: 12px 15px;
            border-radius: 8px;
            display: block;
            margin-bottom: 8px;
            transition: 0.2s;
        }

        .sidebar a:hover,
        .sidebar a.active {
            background: #334155;
        }

        /* Main content */
        .main {
            margin-left: 250px;
            padding: 25px;
        }

        /* Uniform card height */
        .stat-card {
            height: 160px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .percentage-inc {
            font-size: 14px;
            font-weight: 600;
        }

        /* Tables look */
        .table-wrapper {
            background: #ffffff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.05);
        }

        .table thead {
            background: #f1f3f5;
        }

        .badge-status {
            padding: 6px 12px;
        }
        
        /* Calendar customization */
        #calendar {
            background-color: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.05);
        }
        
        .fc-toolbar {
            padding: 10px 0;
        }
        
        .fc-event {
            cursor: pointer;
        }
        
        .room-card {
            transition: transform 0.2s;
        }
        
        .room-card:hover {
            transform: translateY(-5px);
        }
        
        .room-available {
            border-left: 5px solid #28a745;
        }
        
        .room-occupied {
            border-left: 5px solid #dc3545;
        }
        
        .room-maintenance {
            border-left: 5px solid #ffc107;
        }
    </style>
</head>

<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <h4 class="text-center fw-bold mb-4"> Super Admin</h4>
        <a href="admin_dashboard.html"><i class="bi bi-speedometer2 me-2"></i> Dashboard</a>
        <a href="users_admin.html"><i class="bi bi-people me-2"></i> Users</a>
        <a href="books.html"><i class="bi bi-book me-2"></i> Books</a>
        <a href="issue_records.html"><i class="bi bi-journal-arrow-up me-2"></i> Issue Records</a>
        <a href="fines.html"><i class="bi bi-cash-coin me-2"></i> Fines</a>
        <a href="room_booking.html" class="active"><i class="bi bi-calendar-check me-2"></i> Room Booking</a>
        <a href="reports.html"><i class="bi bi-graph-up-arrow me-2"></i> Reports</a>
        <a href="settings.html"><i class="bi bi-gear me-2"></i> Settings</a>

        <a href="#" class="mt-3 text-danger"><i class="bi bi-box-arrow-right me-2"></i> <span>Logout</span></a>
    </div>

    <!-- Main Content -->
    <div class="main">

        <h2 class="mb-4 fw-bold">Room Booking Management</h2>

        <!-- Stats Row -->
        <div class="row g-3 mb-4">
            <div class="col-md-3">
                <div class="card p-3 stat-card">
                    <div>
                        <h6 class="text-secondary">Total Rooms</h6>
                        <h2 class="fw-bold">12</h2>
                    </div>
                    <span class="text-primary percentage-inc"><i class="bi bi-building"></i> 4 study rooms</span>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card p-3 stat-card">
                    <div>
                        <h6 class="text-secondary">Bookings Today</h6>
                        <h2 class="fw-bold">8</h2>
                    </div>
                    <span class="text-success percentage-inc"><i class="bi bi-arrow-up"></i> 2 active now</span>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card p-3 stat-card">
                    <div>
                        <h6 class="text-secondary">Pending Approval</h6>
                        <h2 class="fw-bold">3</h2>
                    </div>
                    <span class="text-warning percentage-inc"><i class="bi bi-exclamation-circle"></i> Requires action</span>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card p-3 stat-card">
                    <div>
                        <h6 class="text-secondary">Available Now</h6>
                        <h2 class="fw-bold">5</h2>
                    </div>
                    <span class="text-info percentage-inc"><i class="bi bi-check-circle"></i> Ready to book</span>
                </div>
            </div>
        </div>

        <!-- Room Management Section -->
        <div class="row g-4">
            <!-- Room List -->
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0">Study Rooms</h5>
                        <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#addRoomModal">
                            <i class="bi bi-plus-circle me-1"></i> Add Room
                        </button>
                    </div>
                    <div class="card-body p-0">
                        <div class="list-group list-group-flush">
                            <div class="list-group-item room-card room-available">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1">Study Room 101</h6>
                                    <span class="badge bg-success">Available</span>
                                </div>
                                <p class="mb-1">Capacity: 6 people</p>
                                <small>Equipment: Projector, Whiteboard</small>
                                <div class="mt-2">
                                    <button class="btn btn-sm btn-outline-primary">Edit</button>
                                    <button class="btn btn-sm btn-outline-danger">Delete</button>
                                </div>
                            </div>
                            <div class="list-group-item room-card room-occupied">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1">Study Room 102</h6>
                                    <span class="badge bg-danger">Occupied</span>
                                </div>
                                <p class="mb-1">Capacity: 4 people</p>
                                <small>Equipment: Monitor, Whiteboard</small>
                                <div class="mt-2">
                                    <button class="btn btn-sm btn-outline-primary">Edit</button>
                                    <button class="btn btn-sm btn-outline-danger">Delete</button>
                                </div>
                            </div>
                            <div class="list-group-item room-card room-available">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1">Study Room 103</h6>
                                    <span class="badge bg-success">Available</span>
                                </div>
                                <p class="mb-1">Capacity: 8 people</p>
                                <small>Equipment: Projector, Video Conferencing</small>
                                <div class="mt-2">
                                    <button class="btn btn-sm btn-outline-primary">Edit</button>
                                    <button class="btn btn-sm btn-outline-danger">Delete</button>
                                </div>
                            </div>
                            <div class="list-group-item room-card room-maintenance">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1">Study Room 104</h6>
                                    <span class="badge bg-warning">Maintenance</span>
                                </div>
                                <p class="mb-1">Capacity: 6 people</p>
                                <small>Equipment: Projector, Whiteboard</small>
                                <div class="mt-2">
                                    <button class="btn btn-sm btn-outline-primary">Edit</button>
                                    <button class="btn btn-sm btn-outline-danger">Delete</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Pending Approvals -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Pending Approvals</h5>
                    </div>
                    <div class="card-body p-0">
                        <div class="list-group list-group-flush">
                            <div class="list-group-item">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1">Study Room 101</h6>
                                    <span class="badge bg-warning">Pending</span>
                                </div>
                                <p class="mb-1">John Doe (Student)</p>
                                <small>Today, 2:00 PM - 4:00 PM</small>
                                <div class="mt-2">
                                    <button class="btn btn-sm btn-success">Approve</button>
                                    <button class="btn btn-sm btn-danger">Reject</button>
                                </div>
                            </div>
                            <div class="list-group-item">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1">Study Room 103</h6>
                                    <span class="badge bg-warning">Pending</span>
                                </div>
                                <p class="mb-1">Jane Smith (Faculty)</p>
                                <small>Tomorrow, 10:00 AM - 12:00 PM</small>
                                <div class="mt-2">
                                    <button class="btn btn-sm btn-success">Approve</button>
                                    <button class="btn btn-sm btn-danger">Reject</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Calendar and Booking Details -->
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0">Booking Calendar</h5>
                        <div>
                            <button class="btn btn-sm btn-outline-primary" id="todayBtn">Today</button>
                            <button class="btn btn-sm btn-outline-secondary" id="monthBtn">Month</button>
                            <button class="btn btn-sm btn-outline-secondary" id="weekBtn">Week</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="calendar"></div>
                    </div>
                </div>
                
                <!-- Current Bookings Table -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Today's Bookings</h5>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th>Room</th>
                                        <th>User</th>
                                        <th>Time Slot</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Study Room 101</td>
                                        <td>Robert Johnson</td>
                                        <td>9:00 AM - 11:00 AM</td>
                                        <td><span class="badge bg-success">Active</span></td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary">Extend</button>
                                            <button class="btn btn-sm btn-outline-danger">Cancel</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Study Room 102</td>
                                        <td>Sarah Williams</td>
                                        <td>10:00 AM - 12:00 PM</td>
                                        <td><span class="badge bg-success">Active</span></td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary">Extend</button>
                                            <button class="btn btn-sm btn-outline-danger">Cancel</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Study Room 103</td>
                                        <td>Michael Brown</td>
                                        <td>2:00 PM - 4:00 PM</td>
                                        <td><span class="badge bg-primary">Upcoming</span></td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary">Edit</button>
                                            <button class="btn btn-sm btn-outline-danger">Cancel</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Study Room 101</td>
                                        <td>Emily Davis</td>
                                        <td>4:00 PM - 6:00 PM</td>
                                        <td><span class="badge bg-primary">Upcoming</span></td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary">Edit</button>
                                            <button class="btn btn-sm btn-outline-danger">Cancel</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Room Modal -->
    <div class="modal fade" id="addRoomModal" tabindex="-1" aria-labelledby="addRoomModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addRoomModalLabel">Add New Study Room</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addRoomForm">
                        <div class="mb-3">
                            <label for="roomName" class="form-label">Room Name</label>
                            <input type="text" class="form-control" id="roomName" placeholder="e.g., Study Room 105" required>
                        </div>
                        <div class="mb-3">
                            <label for="roomCapacity" class="form-label">Capacity</label>
                            <input type="number" class="form-control" id="roomCapacity" min="1" max="20" required>
                        </div>
                        <div class="mb-3">
                            <label for="roomEquipment" class="form-label">Equipment</label>
                            <select class="form-select" id="roomEquipment" multiple>
                                <option value="projector">Projector</option>
                                <option value="whiteboard">Whiteboard</option>
                                <option value="monitor">Monitor</option>
                                <option value="video-conferencing">Video Conferencing</option>
                                <option value="sound-system">Sound System</option>
                            </select>
                            <div class="form-text">Hold Ctrl to select multiple options</div>
                        </div>
                        <div class="mb-3">
                            <label for="roomStatus" class="form-label">Status</label>
                            <select class="form-select" id="roomStatus" required>
                                <option value="available">Available</option>
                                <option value="maintenance">Under Maintenance</option>
                                <option value="unavailable">Unavailable</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveRoomBtn">Save Room</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- FullCalendar JS -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize calendar
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                events: [
                    {
                        title: 'Study Room 101 - John Doe',
                        start: new Date().toISOString().split('T')[0] + 'T09:00:00',
                        end: new Date().toISOString().split('T')[0] + 'T11:00:00',
                        backgroundColor: '#28a745'
                    },
                    {
                        title: 'Study Room 102 - Sarah Williams',
                        start: new Date().toISOString().split('T')[0] + 'T10:00:00',
                        end: new Date().toISOString().split('T')[0] + 'T12:00:00',
                        backgroundColor: '#28a745'
                    },
                    {
                        title: 'Study Room 103 - Michael Brown',
                        start: new Date().toISOString().split('T')[0] + 'T14:00:00',
                        end: new Date().toISOString().split('T')[0] + 'T16:00:00',
                        backgroundColor: '#007bff'
                    },
                    {
                        title: 'Study Room 101 - Emily Davis',
                        start: new Date().toISOString().split('T')[0] + 'T16:00:00',
                        end: new Date().toISOString().split('T')[0] + 'T18:00:00',
                        backgroundColor: '#007bff'
                    },
                    {
                        title: 'Study Room 104 - Maintenance',
                        start: new Date().toISOString().split('T')[0],
                        end: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        backgroundColor: '#ffc107',
                        display: 'background'
                    }
                ],
                eventClick: function(info) {
                    alert('Booking Details:\n' + info.event.title + '\n' + 
                          'Start: ' + info.event.start.toLocaleString() + '\n' +
                          'End: ' + info.event.end.toLocaleString());
                }
            });
            calendar.render();
            
            // Calendar view buttons
            document.getElementById('todayBtn').addEventListener('click', function() {
                calendar.today();
            });
            
            document.getElementById('monthBtn').addEventListener('click', function() {
                calendar.changeView('dayGridMonth');
            });
            
            document.getElementById('weekBtn').addEventListener('click', function() {
                calendar.changeView('timeGridWeek');
            });
            
            // Save room button
            document.getElementById('saveRoomBtn').addEventListener('click', function() {
                const roomName = document.getElementById('roomName').value;
                if (roomName) {
                    alert('Room ' + roomName + ' has been added successfully!');
                    document.getElementById('addRoomForm').reset();
                    bootstrap.Modal.getInstance(document.getElementById('addRoomModal')).hide();
                } else {
                    alert('Please enter a room name');
                }
            });
        });
    </script>
</body>
</html>